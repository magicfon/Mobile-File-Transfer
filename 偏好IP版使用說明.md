# 📱 偏好IP版檔案傳輸系統使用說明

## 🌟 最新功能

### ⭐ 新增：偏好IP功能
- **設為預設**：找到可用IP後，點擊「⭐ 設為預設IP」
- **自動優先**：下次啟動時自動將偏好IP排到第一位
- **智慧記憶**：程式會記住您上次成功的IP
- **視覺標示**：偏好IP會顯示 ⭐ 星號標記

## 🎯 完整功能列表

### ✨ IP管理功能
- **多IP自動偵測**：獲取所有可用網路介面
- **一鍵切換**：「下一個IP ➡️」/ 「⬅️ 上一個IP」按鈕
- **智慧排序**：偏好IP自動排到第一位
- **偏好設定**：⭐ 設為預設IP 按鈕
- **快捷鍵支援**：← → 空白鍵快速切換

### 🔧 實用功能
- **即時更新**：QR Code 立即更新，無延遲
- **智慧分析**：顯示IP類型和連接建議
- **網址複製**：📋 一鍵複製到剪貼簿
- **瀏覽器開啟**：🌐 直接在電腦瀏覽器測試

## 🚀 使用流程

### 第一次使用
1. **啟動程式**：雙擊 `start_server.bat`
2. **嘗試連接**：用手機掃描第一個QR Code
3. **如果失敗**：點擊「下一個IP ➡️」嘗試其他IP
4. **找到可用IP**：連接成功！
5. **設為預設**：點擊「⭐ 設為預設IP」儲存

### 第二次以後使用
1. **啟動程式**：雙擊 `start_server.bat`
2. **自動優先**：程式自動顯示上次成功的IP ⭐
3. **直接使用**：大部分情況下第一個IP就能連接
4. **備用選項**：如果網路環境改變，仍可切換其他IP

## 🖥️ 新版界面

```
┌─────────────────────────────────────────┐
│          📱 手機檔案傳輸               │
│ ┌─────────────────────────────────────┐ │
│ │    🔍 偵測到 3 個可用IP位址        │ │
│ └─────────────────────────────────────┘ │
│          IP選項: 1 / 3                  │
│       192.168.1.100 ⭐                  │  ← 偏好IP顯示星號
├─────────────────────────────────────────┤
│          [QR Code 圖片]                │
├─────────────────────────────────────────┤
│     網址: http://192.168.1.100:5000    │
│                                         │
│ [⬅️上一個] [下一個➡️] [📋複製] [🌐瀏覽器] │
│              [⭐ 設為預設IP]             │  ← 新增按鈕
├─────────────────────────────────────────┤
│ 🔍 IP分析                              │
│ 當前IP: 192.168.1.100                  │
│ 類型: 常見家用網路 - 大多數路由器預設網段 │
└─────────────────────────────────────────┘
```

## 📊 命令行顯示

啟動時的命令行也會顯示偏好IP：

```
============================================================
📱 行動裝置檔案傳輸伺服器 (IP切換版)
============================================================
🔍 偵測到 3 個網路介面:
⭐ 1. 192.168.1.100    ← 偏好IP（星號標記）
   2. 192.168.2.50
   3. 192.168.56.1

💡 使用提示:
   - ⭐ 將優先使用偏好IP: 192.168.1.100
   - 先嘗試第一個IP
   - 如果手機無法連接，點擊「下一個IP」
   - 連接成功後，可點擊「⭐ 設為預設IP」儲存偏好  ← 新提示
   - 可使用 ← → 鍵或空白鍵快速切換
```

## 🎮 按鈕功能

### 主要操作
- **下一個IP ➡️**：切換到下一個可用IP（綠色）
- **⬅️ 上一個IP**：回到上一個IP（橘色）

### 輔助功能
- **📋 複製網址**：複製當前URL到剪貼簿（藍色）
- **🌐 瀏覽器**：在電腦瀏覽器開啟（紫色）

### 🌟 新功能
- **⭐ 設為預設IP**：將當前IP設為偏好IP（紅色）

## 💾 設定檔案

程式會自動創建 `ip_preferences.json` 檔案來儲存偏好設定：

```json
{
  "preferred_ip": "192.168.1.100",
  "last_updated": "2024-01-15T10:30:45"
}
```

## 🎯 使用場景

### 🏠 家用環境
```
第一次：嘗試3個IP，發現192.168.1.100可用 → 設為預設
第二次：自動優先使用192.168.1.100 → 立即連接成功
```

### 🏢 辦公室環境
```
第一次：嘗試多個IP，發現172.16.1.150可用 → 設為預設
第二次：自動優先使用172.16.1.150 → 快速連接
```

### 🏨 不同地點
```
家裡：偏好IP是192.168.1.100
咖啡廳：網路環境不同，仍可切換其他IP
回到家：自動恢復使用192.168.1.100
```

## 🔧 進階技巧

### 重置偏好設定
如果想清除偏好IP，可以：
1. 刪除 `ip_preferences.json` 檔案
2. 重新啟動程式，恢復預設排序

### 手動編輯設定檔
可以直接編輯 `ip_preferences.json`：
```json
{
  "preferred_ip": "您要的IP位址",
  "last_updated": "2024-01-15T10:30:45"
}
```

### 備份設定
可以備份 `ip_preferences.json` 檔案到其他電腦使用

## 🚨 注意事項

1. **網路變更**：如果網路環境變更，偏好IP可能失效
2. **自動切換**：程式會自動偵測，如果偏好IP不可用會使用其他IP
3. **檔案位置**：設定檔在程式同一資料夾，請勿刪除

## 🎉 優勢總結

### 🚀 效率提升
- **免重複設定**：找到一次，永久記住
- **快速啟動**：下次直接使用可用IP
- **減少試錯**：不需要每次都逐一嘗試

### 🎯 智慧體驗
- **自動適應**：偏好IP優先，但保留切換彈性
- **視覺提示**：清楚標示偏好IP
- **簡單操作**：一鍵設定，自動生效

**現在您可以享受更智慧、更高效的檔案傳輸體驗！** ⭐🎉 